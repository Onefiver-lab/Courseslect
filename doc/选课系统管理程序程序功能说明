# 课程选课管理系统 功能说明文档
## 1. 系统概述
该程序是一款基于C++20模块化开发的课程选课管理系统，面向学生、教师、教学秘书三类核心角色，提供课程选课、成绩管理、课程创建与分配等核心业务能力。系统采用分层设计，支持内存存储（默认）和PostgreSQL数据库存储（编译时可选），并实现数据持久化到JSON文件，保障数据不丢失。

## 2. 核心功能模块
### 2.1 角色通用能力
- 角色登录：所有角色均通过唯一ID进行身份验证，ID不存在时提示并拒绝后续操作；
- 菜单交互：为不同角色提供专属操作菜单，支持数字选择操作，输入无效时自动提示并重新获取输入；
- 基础数据校验：对ID、数字（学分、序号、成绩等）、格式（成绩）等输入进行合法性校验，避免无效数据录入。

### 2.2 学生角色功能
- 查看所有可选课课程：展示系统中所有课程的ID、名称、学分、授课教师等信息；
- 选课操作：输入课程ID完成选课，自动校验课程存在性，避免重复选课；
- 查看个人课表：展示已选课程的完整信息；
- 查看个人成绩：展示已选课程的成绩（未评定则显示“未评定”）。

### 2.3 教师角色功能
- 查看授课课程：展示自身负责授课的所有课程列表；
- 录入学生成绩：选择授课课程→选择对应选课学生→输入成绩（支持A-F等级或0-100分），系统自动校验成绩格式有效性，录入后持久化数据。

### 2.4 教学秘书角色功能
- 创建新课程：输入课程ID、名称、学分（校验1-10范围），自动避免课程ID重复；
- 分配授课教师：选择课程并指定教师，校验课程和教师ID存在性，完成教师与课程的关联；
- 查看所有课程：同学生角色的课程列表展示能力。

## 3. 数据管理与持久化
### 3.1 数据初始化
系统启动时自动创建默认基础数据（学生、教师、秘书、课程），避免空系统启动，且重复启动时不会重复创建。

### 3.2 数据存储
- 内存存储（默认）：基于`DataManagerMemory`实现，所有数据存储在内存中，支持增删改查；
- 数据库存储（可选）：编译时定义`USE_POSTGRES`宏，可切换为PostgreSQL数据库存储，通过连接字符串配置数据库信息。

### 3.3 数据持久化
支持将学生、课程核心数据（ID、名称、学分等）保存到`data.json`文件，所有业务操作（选课、录成绩、创课程等）完成后自动触发数据保存，保障数据落地。

## 4. 技术特性
- 模块化设计：采用C++20模块拆分实体层（entity）、数据管理接口层（datamanager_interface）、数据实现层（datamanager_memory）、业务逻辑层（registrar），低耦合易扩展；
- 智能指针管理：使用`std::shared_ptr`管理实体对象生命周期，避免内存泄漏；
- 统一实体抽象：所有业务实体（学生、教师、课程、秘书）继承自`BaseEntity`基类，统一管理ID和名称，保证ID唯一性校验逻辑复用。
